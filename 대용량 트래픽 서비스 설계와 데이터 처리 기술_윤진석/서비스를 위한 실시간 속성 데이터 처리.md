## 컴퓨터 시스템의 종류
> 일괄 처리 시스템, 분산 시스템, 시분할 시스템, 실시간 시스템

* 실시간 시스템이란?
- 자원이 한정되어 있는 상황에서 작업 수행 요청 되었을 때 제한된 시간 안에 처리해 주는 것.
> 즉, 작업 처리에 걸리는 시간을 일관되게 유지할 수 있는 정도에 달려있음 -> 스케쥴링
* 스케쥴링 종류
    - 일괄 처리(배치) 구동 방식 -> FIFO 스케쥴링 등
    - 이벤트-드리븐 구동 방식 -> 우선순위 또는 선점형 스케쥴링
    - 시분할 스케쥴링 방식 -> RoundRobin 등
    - 멀티 태스킹 방식 -> 자원 분배(작업의 동시 수행/병렬 처리)

* 데이터 작업 요청의 처리 스케쥴링
  - 새로 탄생한 게 아니라 모두 컴퓨터 과학의 기본과 동일

### 데이터베이스의 시스템은 어떤 방식인가?
> 실시간 시스템 + 멀티 태스킹 방식
* MySQL은 기본적으로 멀티쓰레드로 처리(OS가 결정)
    - 각 쓰레드는 운영체제로부터 시스템 자원을 할당받아야 실행됨
* 데이터 처리 관점으로 보면 무작위순으로 처리
    - 동시성, 락 등의 이슈가 여기서 나옴
* 최근엔 쓰레드 스케쥴러(우선순위와 이벤트 스케쥴러) 등장
  
### 배치와 스트리밍 형식의 차이
* 특정 묶음 데이터에서 일정 데이터를 뽑기만 하는 것 => 배치 프로세스로 진행이 효율적
* 검색 과정에서 특정 금칙어가 필터 된 나머지만 데이터가 전달되어야 하는 경우 => 스트리밍 프로세스가 효율적
    - 실시간 데이터에 가까움
```
if(금칙어) do nothing
else emit to search engine
```

> 실시간 인기 검색어는 어떻게? : 
> 
> 기대 횟수 배치 프로세싱 = max(과거 일주일 평균 검색횟수, 어제 검색횟수) => 배치 프로세싱
> 관측 횟수 카운팅 및 집계 => 스트리밍 프로세스
> Score = 관측횟수 - 기대횟수 / 표준편차 + 순위차 보정

> 실시간 매출 통계 :
> 
> 실시간으로 발생하는 결제 데이터 중 결제 취소로 필터된 데이터만 집계
> 해당 집계된 데이터를 DB에 저장하여 화면에 노출

### 고객 포인트 소멸 기술 부채 사례
> 서비스 유저가 수백~ 수천만에 달하고, 가입 또는 프로모션 참여로 받은 포인트를 결제 또는 소멸 시효에 따라 차감해야 할 때
* 조건 : 마이페이지 조회가 빈번하고, 응답 속도가 빨라야한다.
* 포인트 내역 테이블은 억 단위 이상의 rows가 쌓이고, 이를 새벽 배치작업으로 처리해 잔여 포인트 합계 테이블을 생성하는 것.
    - 속도는 빨라지겠지만, 배치 쿼리 중에 포인트 결제가 일어난다면?
        - 정합성 문제, 락 관련 장애, 포인트 오류 문의 등이 발생
    
* 실시간 시스템 + Event-driven
* 수억 이상의 rows 테이블을 PubSub design pattern 을 통해, 데이터 변경이 일어나는 것을 구독하고 있는 서버 또는 클라이언트가
해당 변경에 대해 실시간으로 잔여 포인트 합계 테이블을 생성.
    - 거대한 배치 작업을 줄여주고 충돌 위험을 낮춘다.

## Real-time Database
> 데이터 베이스의 내용을 저장하고 App간 실시간 동기화 하는 서비스
> 예) Firebase RTDB 

* 과거에도 공장 자동화, 항공 우주, 교통 제어, 주식 거래등을 위해
실시간 데이터베이스의 연구가 있었음. 그러나, 대부분 짧은 주기의 폴링Polling 기법이 활용 되었음.

### 실시간 속성의 서비스 데이터 처리
- 오늘날 대두되는 실시간 상호작용 서비스 구현은 관계형 DB만으로 처리하기 어렵다.
- 컴퓨터 시스템 구조, 그리고 스케쥴링, 디스패칭, 멀티 태스킹과 같은 기본 개념을 이해하고
관계형 DB + PubSub 디자인 패턴, 실시간/시계열 데이터베이스, NoSQL등을 활용해 문제를 적절히 해결하는 설계 능력을 키우는 것이 중요하다.
